---
title: Java 簡介 02
date: 2024-06-06 08:22:19
tags: 
    - 職訓
    - Java
categories: 
    - [職訓, Java]
    - Java
description: "<b>課程內容：</b>
<h6>Ch.9 類別的進階認識</h6>
認識建構元、實例變數與函數、類別變數與函數、類別型態的陣列、內部類別的認識、回收記憶體<br>
<h6>Ch.10 類別的繼承</h6>"
---

### 類別的進階認識

#### 認識建構元

+ 建構元：建立物件時能夠幫物件設定初始值
+ 建構元的名稱必須和所屬類別的名稱相同
+ 可視為一種特殊函數
+ 不會有回傳值
+ 可以多載

```java 建構元的定義格式
修飾子 類別名稱(型態1 引數1,型態2 引數2,){
    程式敘述;
}
```

##### 1. 呼叫時機

+ 一般函數
  + 需要用到時再呼叫
+ 建構元
  + 建立物件時便會自動呼叫並執行
  + 可以對成員做初始化設定（設定初值）

```java hw9_1_範例_01建構元
class CBox
{
   int length; 
   int width; 
   int height; 
      
   public CBox(int l,int w, int h){
      length=l;
      width=w;
      height=h;
      System.out.println("from setting: none");
}

public class hw9_1{
   public static void main(String args[]){
      CBox bb = new CBox(5,9,7);
      System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);
   }
}
```

> **Output：**
>> from setting: none
length:5     width:9     height:7
>
> 先執行`CBox bb = new CBox(5,9,7);`
>> 因為裡面含有`System.out.println("from setting: none");` 所以會先印出`"from setting: none"`
>
> 後執行`System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);`

##### 2. 建構元的多載

```java hw9_1範例_02.建構元的多載

class CBox
{
   int length; 
   int width; 
   int height; 
      
   public CBox(int l,int w, int h){
      length=l;
      width=w;
      height=h;
      System.out.println("from setting: none");
   }
   
   
   public CBox(){
      length=6;
      width=10;
      height=8;
      
   }
   
}

public class hw9_1{
   public static void main(String args[]){
      CBox cc = new CBox(5,9,7);
      System.out.println("length:"+cc.length+"\t width:"+cc.width+"\t height:"+cc.height);
      CBox bb = new CBox();
      System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);
   }
}

```

> **Output：**
>> from setting: none
length:5     width:9     height:7
length:6     width:10    height:8
>
> 1. 先執行`cc = new CBox(5,9,7);`
>
>> 因為裡面含有`System.out.println("from setting: none");` 所以會先印出`"from setting: none"`
>
> 2. 再執行`System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);`
> 3. 再執行`CBox bb = new CBox();`
>
>>因為建構元裡不含有`print` , 所以不會印出任何東西
>
> 4. 再執行`System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);`

##### 3. 建構元之間的呼叫

+ 建構元之間的呼叫要透過`this()`
  + 指的是在建構元內呼叫另一個建構元

    ```java
    class CBox
    {
        int length; 
        int width; 
        int height; 
            
        public CBox(int l,int w, int h){
            length=l;
            width=w;
            height=h;
            System.out.println("from setting: none");
        }

        public CBox(){
        this(6,8,10);   <-在這裡呼叫前面的CBox
        }

    }

    public class hw9_1{
        public static void main(String args[]){
            CBox cc = new CBox(5,9,7);
            System.out.println("length:"+cc.length+"\t width:"+cc.width+"\t height:"+cc.height);
            CBox bb = new CBox();
            System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);
        }
    }

    ```

    > **Output：**
    >> from setting: none
    length:5     width:9     height:7
    from setting: none
    length:6     width:8     height:10
    >
    > 1. 先執行`cc = new CBox(5,9,7);`
    >> 因為裡面含有`System.out.println("from setting: none");` 所以會先印出`"from setting: none"`
    >
    > 2. 再執行`System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);`
    > 3. 再執行`CBox bb = new CBox();`
    >> 因為this(), 執行前面有引數的建構元, 所以會再次印出`"from setting: none"`
    >
    > 4. 再執行`System.out.print("length:"+bb.length+"\t width:"+bb.width+"\t height:"+bb.height);`
    >> 因為`this()`給的引數是`this(6,8,10)`, 帶回前面有引數的`CBox(int l,int w, int h)`結果是`6, 8, 10`

##### 4. 建構元的公有(public)與私有(private), 及建構元的預設

+ public:
  + 可以在程式的任何地方被呼叫
+ private:
  + 無法在建構元所在的類別以外被呼叫
  
+ 建構元的預設
  + 如果省略建構元Java會呼叫預設建構元

    ```java Java的預設建構元格式
    public CBox(){

    }
    ```

  + 如果自己建立建構元, `無論引數內容是否備齊`, Java都不會再提供預設建構元

---

#### 類別變數與類別函數

##### 實例變數與實例函數

+ 實例變數
  + 定義: 各自獨立且存於不同的記憶體之變數，稱為「實例變數」 (instance variable)
  + 變數擁有自己儲存資料的記憶體空間，不與其它物件共用
  + 類別成員裡 「物件成員的變數」
    + CC.ctrl1(int a=1, int b=2)
    + CC.ctrl1(int a=3, int b=4)
    + int a, int b, 即為實例變數。他們各自獨立且不予其他物件共用，只供自己使用
      > 個人理解就是類別裡的物件成員
    在類別裡被 `單獨取用`
  
+ 實例函數
  + 定義: 類別裡必須先建立物件，再用物件呼叫的函數

##### 類別變數與類別函數的介紹

+ 類別變數
  + 定義: 由類別裡所有的物件共享
  + 必須以`static`做宣告
    + ```java ex: private static int cnt = 0;```
      > `static`約等於`全域變數`的宣告
  
+ 類別函數
  + 若將函數定義為類別函數（即加上`static`）則可直接由類別呼叫
  + 依然可以由物件呼叫，不過要先建立物件
  + 沒有物件就直接用類別呼叫
  + `main()`函數前必定有個`static`修飾子

```Java hw9_2範例_01類別變數與函數的範例
// hw9_2

class CWin{
   
   private String color;
   private int width;
   private int height;
   
   private static int cnt = 0;
   
   public CWin(){
      this("Red",2,2);  
   }
   
   public CWin(String str, int w, int h){
      color=str;
      width=w;
      height=h;
      cnt++;
      System.out.println("Color:"+color+"\twidth: "+width+"\theight: "+height);
   }
   
   /* 
    *void count(){
      c++;
      }
    */
      
   
   public static void count(){
      System.out.println(cnt+" object(s) created.");
   }
   
   public static void setZero(){
      cnt=0;
   }
   
   public static void setValue(int n){
      cnt=n;
   }
}



public class hw9_2{
   public static void main(String args[]){
      CWin sq=new CWin();
      CWin.count();
      CWin.setZero();
      CWin.count();
      CWin.setValue(2);
      CWin.count();
   }
}
```

> **Output：**
>> Color:Red   width: 2    height: 2
1 object(s) created.
0 object(s) created.
2 object(s) created.
>
> **說明**
>
> 1. 將int cnt設定為全域變數, 初始值為 0
`private static int cnt = 0;`
> 2. 設定一個有引數的`建構子`
`public CWin(String str, int w, int h)`
幫 CWin() 類別設定有引數的初始值
> 3. 設定一個沒有引數的`建構子`
> 裡面用`this("Red",2,2);`呼叫有引數的建構子, 並裝入設定的引數`"Red",2,2`
>
> ```java
>   public CWin(){
>     this("Red",2,2);  
>  }
>   ```
>
> 4. 因為兩個建構子都導向有引數的建構子，所以直接在裡面計數
    設定`cnt++;`
    並印出內容物方便辨識`println("Color:"+color+"\twidth: "+width+"\theight: "+height);`
>
> 5. `cnt`計數是全域變數，故後面的相關函式都用`static`代表`class CWin()`內全域共用
>
> 6. `CWin sq=new CWin();`
>> 先印出無引數的建構子內容, 也就是呼叫`this("Red",2,2);`
>
> 7. `CWin.count();`確認計數, 已經設定了一個物件所以`++`
> cnt=0+1, cnt=1
>> 印出 `1 object(s) created.`
>
> 8. 後面就是數值設定和確認計數，不多贅述
>

+ 類別變數與類別函數的限制
  + 類別函數無法存取實例變數或呼叫實例函數
  + 不能使用this()關鍵字

##### 設值給類別型態的變數

類別可以做為型態設置給變數

```java
    class CWin{
        ......
    } 

    main(){
        CWin cir1, cir2;
    }
```

意即將`變數:cir1, cir2` 皆設定為 CWin類別

```java
    main(){
            CWin cir1, cir2;
            cir2=cir;
        }
```
這裡的 `cir2` 所指向的記憶體位置和`cir1`完全相同
因此修改`cir2`內容時，`cir1`會一併被修改`（因為是同一個位置的東西！）`

> **舉個例:**
> cir2學生和cir1學生共用一個置物櫃
> cir2學生變動了置物櫃的內容
> cir1學生的置物櫃內容也會變動
> **因為兩個人用的是同個置物櫃！**

##### 以類別型態變數傳遞引數

1. 類別可以做為型態設定給物件

```java 格式範例
傳回值型態 compare(CCircle obj){

}

CCircle 被指定為 obj 的型態
```

2. 由函數傳回類別型態的變數

```java 格式範例
CCircle compare(CCircle obj){

}

CCircle 為變數傳回的型態
```
{% note info %}
> **舉例來說**
>> 一台叫做`CCircle`的機器（類別）裡有`半徑`、`pi`（變數）和`比較功能`（compare函數）
> `CCircle obj` 就是設定一台同樣型號為CCircle的機器，名字叫obj
>
> `CCircle compare(CCircle obj){}` 
>> 就是 要使用CCircle機器的比較功能（`compare()`）的話，要輸入同一型號機器（CCircle類別）的資料
>
> （CCircle obj: obj可以隨意改名，是為了compare函數跑程式規則時使用的變數）
> （白話文就是：這個功能要放CCircle這個型號的資料進來，為了後續作業方便先給他一個`暫定名稱`叫`obj`吧）
>
> `CCircle compare()`
>> 比較功能輸出的結果 格式會是`CCircle`這個型號機器的資料（內含半徑、pi、比較功能）
{% endnote %}

```java hw9_3_2_傳回類別型態的變數範例
class CCircle{
   private static double pi=3.14;
   public double radius;
   
   public CCircle(double r){
      radius=r;
      }
   
   public CCircle compare(CCircle cir){
      if(this.radius>cir.radius)
         return this;
      else
         return cir;
   }
}

public class hw9_3{
   public static void main(String args[]){
      CCircle cir1=new CCircle(1.0);
      CCircle cir2=new CCircle(2.0);
      CCircle obj;
      
      obj=cir1.compare(cir2);
      if(cir1==obj)
         System.out.println("radius of cir1 is larger");
      else
         System.out.println("radius of cir2 is larger");
   }
}
```

> **Output**
>>radius of cir2 is larger
>
> **說明**
> 有空再補，累累

##### 類別型態的陣列

```java hw9_4_類別型態的陣列及迴圈使用範例
class CScore
{
   private String name; // 姓名
   private int math;    // 數學成績
   private int eng;     // 英文成績
   
   CScore(String str,int m, int e){
      name=str;
      math=m;
      eng=e;
   }
   

   public static void show(CScore c[]){
      System.out.println("Name\tMath\tENG\t");
      for(int i=0;i<c.length;i++){
         System.out.println(c[i].name+"\t"+c[i].math+"\t"+c[i].eng);
      }
   }
}


public class hw9_4{
   public static void main(String args[]){
      CScore a[]=new CScore[3];
      a[0] = new CScore("Fiona",86,92);
      a[1] = new CScore("Ryan",95,79);
      a[2] = new CScore("Ariel",81,83);
      
      CScore.show(a);
   }
}
```

> **Output**
>>radius of cir2 is larger
>
> **說明**
> 有空再補，累累

