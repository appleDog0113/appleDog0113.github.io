---
title: Java-簡介-03
date: 2024-06-14 08:37:50
tags: 
    - 職訓
    - Java
categories: 
    - [職訓, Java]
    - Java
description: "ch9 巢狀類別、ch10 繼承"
---

#### 巢狀類別

在類別A裡再定義一個類別B
> `外部類別A` 裡的 `內部類別B`

{% note danger %}
static 要用 static 才能互相呼叫
{% endnote %}

##### 匿名內部類別

不設定物件直接呼叫內部類別，並存取內部類別或設定函數

```java
public class hw9_5{
   
   static class CData{      // 設定hw9_5的內部類別
   int a; 
   int b; 
   }
   
   public static void main(String args[]){
      
      (
         new CData(){
            void sub(int x,int y)
            {
               a=x;
               b=y;
               System.out.println(a+"*"+b+"="+(a*b));
            }
         }  
      ).sub(6,8);    // 建立好新匿名內部類別後直接呼叫
   }
}
```

{% note info %}
**Output**
6*8=48
{% endnote %}

#### 回收記憶體

+ 稱為「垃圾回收機制」(garbage collection)
+ 將指向該物件的變數值設為null即可:
`cir1=null;`
+ 若兩個變數指向同個物件
  + 如果把其中一個變數設為`null`，因為另一個變數還是指向該記憶體，所以不會回收

#### 類別繼承

+ extends = `延伸`
+ 根據既有類別延伸出另一個類別
+ 每一個類別只能有一個父類別（單一繼承）
  + Java的介面可以實現多重繼承（多重繼承）

{% note success %}
繼承的功能多半是簡化複製貼上的重複流程
子類別會繼承父類別的某些成員和函式，可以直接使用，不用重寫
{% endnote %}

##### 呼叫建構元

+ super(); 呼叫建構元的`關鍵字`
  + 呼叫父類別的`super()`時，必須要寫在子類別第一行
  + 不能和`this()`同時使用
  + 可以多載
  + 若沒有設定引數，預設提供沒有引數的建構元

```java hw10_1_繼承的練習
class Caaa
{
   public int x;
   public int y;   
   
   public Caaa(){
      x=5;
      y=5;
   }
   public Caaa(int a, int b){
      x=a;
      y=b;
   }
   
   public void sub()
   {
       System.out.println(x+"*"+y+"="+x*y);
   }
}

class Cbbb extends Caaa{
   
   public Cbbb(){
   }
   
   public Cbbb(int a, int b){
      super(a,b);
   }
   
   void set_num(int a, int b){
      System.out.println("將x,y 重新設定");
      x=a;
      y=b;
   }
   
   void show(){
      
      System.out.println("x = "+x+", y = "+y);
      
   }
}


public class hw10_1
{
   public static void main(String args[])
   {
      Cbbb bb=new Cbbb();
      bb.show();
      bb.sub();
      bb.set_num(5,10);
      bb.show();
      bb.sub();
   }
}
```

{% note info %}
**Outpute**
x = 5, y = 5
5*5=25
將x,y 重新設定
x = 5, y = 10
5*10=50
{% endnote %}

{% note success%}
**說明**

1. 設定類別 class Caaa

    ```java
    class Caaa
    {
    public int x;
    public int y;   
    
    public Caaa(){
        x=5;
        y=5;
    }
    public Caaa(int a, int b){
        x=a;
        y=b;
    }
    
    public void sub()
    {
        System.out.println(x+"*"+y+"="+x*y);
    }
    }
    ```

    > 裡面包含`無引數`的建構子：`x=5`，`y=5`
    和`有引數`的建構子：`x=a`，`y=b`
    以及method `sub()`

2. 設定繼承Caaa的類別 class Cbbb

    ```java
    class Cbbb extends Caaa{

    public Cbbb(){
    }

    public Cbbb(int a, int b){
        super(a,b);
    }

    void set_num(int a, int b){
        System.out.println("將x,y 重新設定");
        x=a;
        y=b;
    }

    void show(){
        
        System.out.println("x = "+x+", y = "+y);
        
    }
    }
    ```

    > + 若有設定建構元，就沒有Java的預設建構元了，需要自己建一個空白的無引數建構元 
    > + 類別繼承若沒有特別設定super()引數, 默認自動套用父類別的無引數建構元
    >   + 所以在Cbbb(int a, int b)這種有引數的建構元裡
    >   需要呼叫super(a,b)以設定要呼叫的父類別有引數建構元

    `Cbbb`直接使用`Caaa`的`int x`, `int y`成員，沒有另外設定
    `sub()`也是延用父類別的method

{% endnote %}

##### 改寫與多載

```java hw10_2_範例
class Car
{
   public String color;
   
   public Car()
   {
   }
   
   public Car(String str)
   {
      color=str;
   }
   
   public void show()
   {     
      System.out.println("車身顏色:"+color);
   }
}

class Truck extends Car{
   String owner="Tom";
   String id="123";
   
   public Truck(String str){
      super(str);
   }
   
   public Truck(String s1, String s2, String s3){
      color=s1;
      id=s2;
      owner=s3;
   }
   
   public void show(){
   System.out.println("車主姓名\t"+"車牌號碼\t"+"車身顏色\t");
   System.out.println(owner+"\t\t"+id+"\t\t"+color);
   }
}


public class hw10_2{
   public static void main(String args[]){
      Car t0=new Truck("Blue");
      t0.show();
      Car t1=new Truck("Blue","C2-5678","Ariel");
      t1.show();

   }
}
```

{% note info %}
**Out put**
車主姓名    車牌號碼    車身顏色
Tom     123     Blue
車主姓名    車牌號碼    車身顏色
Ariel       C2-5678     Blue
{% endnote %}
