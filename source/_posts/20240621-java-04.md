---
title: Java-簡介-04
date: 2024-06-21 08:40:12
tags: 
    - 職訓
    - Java
categories: 
    - [職訓, Java]
    - Java
description: "ch.11 抽象類別、介面（interface）、instanceof()"
---

#### 抽象類別

##### 抽象類別介紹

+ 目的是讓使用者依據格式建立新的類別
+ 關鍵字：`abstract`
+ 抽象函數裡只有定義名稱，沒有定義處理方式

```java hw11_1
abstract class CShape
{
   protected int width;
   protected int height; 
   
   public void show()
   {
      System.out.println("width="+width);
      System.out.println("height="+height);
      System.out.println("area="+area());
   }
   public abstract int area();    // 計算面積  
}
```

{% note info %}

用`abstract`宣告抽象類別與抽象函數
建立父類別`CShape`

其中沒有用到`abstract`修飾的就是實例，繼承後可以直接使用
被宣告`abstract`則需要被改寫才能使用

{% endnote %}

```java hw11_1
abstract class CShape
{
   protected int width;
   protected int height; 
   
   public void show()
   {
      System.out.println("width="+width);
      System.out.println("height="+height);
      System.out.println("area="+area());
   }
   public abstract int area();    // 計算面積  
}

class CWin extends CShape
{

   CWin(int w, int h){
      width = w;
      height = h;
   }

   
   public int area(){
      return width*height;
   }
}

public class hw11_1
{
   public static void main(String args[])
   {
      CWin win=new CWin(5,7);  // 建立CWin類別的物件
      win.show();
   }
}

```

{% note success %}
**Output**
width: 5
height: 7
area: 35
{% endnote %}

{% note info %}

建立子類別`CWin`繼承`CShape`
建立兩個變數的建構元

```java
public int area(){
    return width*height;
}
```

複寫原本的抽象類別才能做使用

```java
public class hw11_1
{
   public static void main(String args[])
   {
      CWin win=new CWin(5,7);  // 建立CWin類別的物件
      win.show();
   }
}
```

在`main()`裡呼叫子類別`CWin`
使用父類別函數`win.show()`
並使用在子類別被複寫過的`show()`

{% endnote %}


#### 介面 interface

+ 介面的資料成員必須初始化
+ 介面的函數必須全部定義成`abstract`
+ class可以用`implements`（實作）介面

```java
interface 介面名稱
{
    final 資料型態 成員名稱 =>常數  // 成員必須設定初值
    修飾子 abstract 傳回值型態 函數名稱(...);   //abstract 不會定義處理方式
}
```

+ `interface`裡可以省略`final`和`abstract`
  + 因為是必填

```java
// hw11_9, 多重繼承的練習
interface iShape
{   
   public void show();  
   public int area(); 
}

interface iColor
{
   public void showColor();
}

class CWin implements iShape,iColor
{
   int width, height;
   String color;
   public CWin(int w, int h, String c){
      width=w;
      height=h;
      color=c;
   }
   
   public int area(){
      return width*height;
   }
   
   public void showColor(){
      System.out.println("color: "+color);
   }
   
   public void show(){
      System.out.println("width: "+width);
      System.out.println("height: "+height);
      System.out.println("area: "+area());
      showColor();
   }
   
}

public class hw11_3
{
   public static void main(String args[])
   {
      CWin win=new CWin(5,7,"Green");
      win.show();
   }
}
```

{% note success %}
**Output**
width: 5
height: 7
area: 35
color: Green
{% endnote %}

{% note info %}
由於`interface`的`method`通通都是`abstract`
要使用的話就要全部複寫
~好麻煩喔怎麼這樣~

`class CWin implements iShape,iColor`
介面：`implements` 後面可以接很多`interface`
繼承：`expend` 後面只能接一個`class`
{% endnote%}

##### 介面的延伸與繼承

+ 介面可以透過繼承來衍生出新介面
  + 原來的介面稱為基底介面或父介面
  + 衍生出的介面稱為衍生介面或子介面
  + **一個介面可以繼承自多個介面**（多重繼承）

```java hw11_4
interface Data
{   
   public void best();         // 判斷那一科成績較高
   public void failed();       // 判斷那一科成績低於60分
}
interface Test extends Data
{
   public void showData();     // 顯示學生的資料及平均成績
   public double average();    // 計算數學和英文的平均成績
}
class CStu implements Test
{
   protected String name;      // 姓名 
   protected int math;         // 數學成績
   protected int english;      // 英文成績
   
   public CStu(String n, int m, int eng){
      name=n;
      math=m;
      english=eng;
   }
   
   public void best(){
      if (math>english){
         System.out.println(name+"的數學比較好");
      }else{
         System.out.println(name+"的英文比較好");
      }
   }
   
   public void failed(){
      if(math<60 && english<60){
         System.out.println(name+"的數學和英文都當掉了");
      }else{
         if (math<60)
            System.out.println(name+"的數學當掉了");
         if (english<60)
            System.out.println(name+"的英文當掉了");
      }
   }
   
   public double average(){
      return (math+english)/2.0;
   }
   
   public void showData(){
      System.out.println("姓名: "+name);
      System.out.println("數學成績: "+math);
      System.out.println("英文成績: "+english);
   }
   
   public void show(){
      showData();
      System.out.println("平均成績: "+average());
      best();
      failed();      
   }
}

public class hw11_4
{
   public static void main(String args[])
   {
      CStu stu=new CStu("Judy",58,91);          
      stu.show();
   }
}
```

##### instanceof

+ 測試物件與某類別是否有繼承關係
  + 物件是否為某類別或其子類別
+ 回傳值：布林

格式：`[obj] instanceof [class]`

```java
class CCircle{}
class CCoin extends CCircle{}

public class hw11_5 extends CCoin{
   public static void main(String args[]){
      
      boolean status;
      CCoin coin=new CCoin();
      CCircle cir=new CCircle();
      hw11_5 obj=new hw11_5();
      CCoin carr[]=new CCoin[5];
      
      status=(cir instanceof CCoin);
      System.out.println("cir instanceof CCoin? "+status);
      
      status=(obj instanceof CCircle);
      System.out.println("obj instanceof CCircle? "+status);
      
      status=(coin instanceof hw11_5);
      System.out.println("coin instanceof hw11_5? "+status);

      status=(coin instanceof CCoin);
      System.out.println("coin instanceof CCoin? "+status);

      status=(coin instanceof CCircle);
      System.out.println("coin instanceof CCircle? "+status);

      status=(carr instanceof Object);
      System.out.println("carr instanceof CCircle? "+status);
      
      // status=(cir instanceof String);
      // System.out.println("coin instanceof CCircle? "+status);            
      
   }
}
```

{% note success %}
**Output**
cir instanceof CCoin? false
obj instanceof CCircle? true
coin instanceof hw11_5? false
coin instanceof CCoin? true
coin instanceof CCircle? true
carr instanceof CCircle? true
{% endnote %}

